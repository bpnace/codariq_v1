#!/usr/bin/expect -f
# Verify complete deployment
set timeout -1
set host "5017709652.ssh.w2.strato.hosting"
set port "22"
set user "su122510"
set password "razxoc-kYzxow-jejbu9"
set remotedir "/codariq"

puts "================================================"
puts "Verifying Complete Deployment"
puts "================================================"

spawn sftp -oBatchMode=no -P $port $user@$host
expect {
  -re "(?i)password:" { send "$password\r" }
  timeout {
    puts "ERROR: Connection timeout"
    exit 2
  }
}
expect "sftp>"

send "cd $remotedir\r"
expect "sftp>"

puts "\n==> Root directory contents:"
send "ls -la\r"
expect "sftp>"

puts "\n==> Checking critical files exist:"
send "ls -la .htaccess robots.txt sitemap-index.xml manifest.json llms.txt\r"
expect "sftp>"

puts "\n==> Checking fonts:"
send "ls -la fonts/\r"
expect "sftp>"

puts "\n==> Checking images subdirectories:"
send "ls -la images/badges/ images/hero/ images/logos/ images/testimonials/\r"
expect "sftp>"

puts "\n==> Disconnecting..."
send "bye\r"
expect eof

puts "\n================================================"
puts "Verification Complete!"
puts "================================================"
