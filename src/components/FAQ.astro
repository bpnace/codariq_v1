---
export interface Props {
  title?: string;
  subtitle?: string;
  faqs?: Array<{
    question: string;
    answer: string;
    category?: string;
  }>;
}

const {
  title = "Häufig gestellte Fragen",
  subtitle =
    "Antworten zu Automatisierung, Kosten, Zeitrahmen und Datenschutz für Selbstständige und kleine Teams in DACH",
  faqs = [
    {
      question: "Für wen ist Automatisierung geeignet?",
      answer:
        "Für Selbstständige und Unternehmen bis 50 Personen, die viele wiederkehrende Aufgaben haben und im Alltag zu viel Zeit mit E Mails, Dokumenten, Leads oder Backoffice verlieren. Du musst dafür keine Tools kennen. Entscheidend ist nur, dass es einen Ablauf gibt, der sich wiederholt.",
      category: "Allgemein",
    },
    {
      question: "Funktioniert das auch, wenn ich allein arbeite?",
      answer:
        "Ja, gerade dann. Wenn du allein bist, musst du alles selbst machen. Automationen übernehmen Aufgaben wie ein zusätzliches Teammitglied: Sie sortieren Mails, fassen Leads nach, erstellen Dokumente oder übertragen Daten zwischen Tools. Du behältst die Kontrolle, sparst aber täglich Stunden für Routinearbeit.",
      category: "Allgemein",
    },
    {
      question: "Lohnt sich das für mein kleines Team?",
      answer:
        "Wenn dein Team jede Woche mehrere Stunden mit wiederkehrenden Aufgaben verliert, dann ja. Die meisten Teams sparen 5-15 Stunden pro Person und Woche durch Automatisierung. Das Team Paket ab 1.499 € amortisiert sich meist in wenigen Wochen, weil diese Zeit für zahlende Kunden genutzt werden kann.",
      category: "Kosten",
    },
    {
      question: "Welche Prozesse lassen sich am besten automatisieren?",
      answer:
        "Am besten funktionieren Abläufe, die regelmäßig vorkommen und heute manuell ablaufen. Typische Beispiele sind Support und Kontaktanfragen, Lead Nachfassen, Dokumente und Rechnungen, Recruiting und Onboarding, Terminabstimmungen sowie wiederkehrende Dateneingaben zwischen Tools.",
      category: "Use Cases",
    },
    {
      question: "Wie läuft die Zusammenarbeit ab?",
      answer:
        "Erst schaffen wir Klarheit über Ziel, Ablauf und Startpunkt. Dann setzen wir die Automatisierung um und verbinden deine vorhandenen Systeme. Danach führen wir es in deinen Alltag ein, beobachten die ersten Wochen und justieren nach, bis es stabil läuft.",
      category: "Ablauf",
    },
    {
      question: "Wie lange dauert die Umsetzung?",
      answer:
        "Das hängt vom Umfang ab. Das Start Paket ist meist in 2 bis 5 Wochen produktiv, das Team Paket in 3 bis 8 Wochen und das Wachstum Paket in 6 bis 12 Wochen. Entscheidend sind Anzahl der Abläufe, Datenlage und wie viele Tools verbunden werden.",
      category: "Zeitrahmen",
    },
    {
      question: "Was kostet das und wovon hängt der Preis ab?",
      answer:
        "Die Pakete starten ab 490 Euro, ab 1.490 Euro und ab 3.990 Euro. Der genaue Preis hängt vor allem von drei Dingen ab: wie viele Abläufe umgesetzt werden, welche Systeme angebunden werden und wie sauber die Daten heute schon vorliegen. Du bekommst vor der Umsetzung einen klaren Plan mit Dauer und ab Preis.",
      category: "Kosten",
    },
    {
      question: "Muss ich dafür IT Wissen mitbringen?",
      answer:
        "Nein. Du erklärst kurz, was heute passiert, zeigst ein paar Beispiele und gibst die nötigen Zugriffe frei. Wir übernehmen Umsetzung, Tests und Übergabe. Du bekommst eine kurze, verständliche Übersicht, damit du weißt, was läuft und nicht abhängig bist.",
      category: "Aufwand",
    },
    {
      question: "Wie bleibt das DSGVO konform?",
      answer:
        "Wir richten Zugriffe, Datenflüsse und Freigaben so ein, dass nur das verarbeitet wird, was wirklich nötig ist. EU Hosting ist möglich, auf Wunsch auch Deutschland. Für Auftragsverarbeitung können wir eine AVV bereitstellen. Du behältst jederzeit die Kontrolle, wer worauf zugreifen darf.",
      category: "Datenschutz",
    },
    {
      question: "Welche Tools und Systeme könnt ihr anbinden?",
      answer:
        "Typisch sind E Mail Postfächer, Kalender, Formulare, CRM Systeme, Buchhaltung, Shops, Helpdesk und Dateiablagen wie Google Drive oder OneDrive. Wenn ein System eine Schnittstelle hat, lässt es sich meistens sauber verbinden. Wenn nicht, finden wir eine pragmatische Alternative.",
      category: "Integration",
    },
    {
      question: "Wie viel Zeit brauche ich selbst dafür?",
      answer:
        "Dein Aufwand bleibt klein. Am Anfang brauchen wir einmal deinen Ablauf und ein paar Beispiele. Danach gibt es kurze Abstimmungen, damit wir richtig liegen. In der Regel reicht ein fester Ansprechpartner und wenig Zeit pro Woche, während wir umsetzen und testen.",
      category: "Aufwand",
    },
    {
      question: "Was passiert nach dem Live Gang?",
      answer:
        "In den ersten Wochen beobachten wir die Ergebnisse, fangen Sonderfälle ab und passen nach, bis es zuverlässig läuft. Wenn du möchtest, übernehmen wir auch die laufende Betreuung, damit Änderungen an Tools oder Prozessen kein Problem werden.",
      category: "Betrieb",
    },
    {
      question: "Geht das komplett remote?",
      answer:
        "Ja. Setup, Abstimmungen und Umsetzung können vollständig remote passieren. Du bekommst klare Schritte, feste Termine und Updates, damit du jederzeit weißt, wo wir stehen.",
      category: "Ablauf",
    },
    {
      question:
        "Was, wenn ich schon mal angefangen habe und es nicht funktioniert?",
      answer:
        "Dann schauen wir uns an, warum es hängt. Oft ist der Ablauf zu kompliziert, Zuständigkeiten sind unklar oder Sonderfälle wurden nicht bedacht. Wir vereinfachen, bauen sauber neu auf und bringen es so in den Alltag, dass es genutzt wird und stabil bleibt.",
      category: "Ablauf",
    },
  ],
} = Astro.props;

// Group FAQs by category for better organization
const categories = [...new Set(faqs.map((faq) => faq.category))].filter(
  Boolean,
);
const groupedFAQs =
  categories.length > 0
    ? categories.reduce((acc, category) => {
        acc[category] = faqs.filter((faq) => faq.category === category);
        return acc;
      }, {})
    : { Allgemein: faqs };
---

<section id="faq" class="py-12 sm:py-16 lg:py-20 bg-gray-50">
  <div class="max-w-8xl mx-auto px-3 sm:px-4 md:px-6 lg:px-12 xl:px-16">
    <!-- Section Header -->
    <div class="text-center mb-8 sm:mb-12 lg:mb-16 animate-slide-up">
      <h2
        class="section-title mb-3 sm:mb-4"
      >
        {title}
      </h2>
      <p
        class="section-subtitle max-w-3xl mx-auto"
      >
        {subtitle}
      </p>
    </div>

    <!-- FAQ Accordion - Two Column Layout -->
    <div
      class="grid grid-cols-1 md:grid-cols-2 gap-3 sm:gap-4 md:gap-6 lg:gap-8 max-w-6xl mx-auto"
    >
      {
        faqs.map((faq, index) => (
          <div
            class="bg-white rounded-lg overflow-hidden border border-gray-200 hover:border-gray-300 transition-all duration-200 group mb-2 animate-fade-in-up"
            style={`animation-delay: ${index * 50}ms`}
          >
            <details class="group/details">
              <summary class="flex items-center justify-between p-3 sm:p-4 cursor-pointer list-none hover:bg-gray-50 transition-colors duration-200">
                <div class="flex-1 pr-3 sm:pr-4">
                  <h3 class="text-sm sm:text-base font-black text-gray-900 group-hover/details:text-gray-700 transition-colors leading-tight">
                    {faq.question}
                  </h3>
                </div>

                {/* Toggle Icon */}
                <div class="flex-shrink-0 ml-3 sm:ml-4">
                  <svg
                    class="w-4 h-4 sm:w-5 sm:h-5 text-gray-400 group-hover/details:text-gray-600 transition-all duration-200 transform group-open/details:rotate-180"
                    fill="none"
                    stroke="currentColor"
                    viewBox="0 0 24 24"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="M19 9l-7 7-7-7"
                    />
                  </svg>
                </div>
              </summary>

              {/* Answer Content */}
              <div class="px-3 sm:px-4 pb-3 sm:pb-4">
                <div class="pt-2 sm:pt-3 border-t border-gray-100">
                  <p class="text-gray-600 leading-relaxed text-xs sm:text-sm">
                    {faq.answer}
                  </p>
                </div>
              </div>
            </details>
          </div>
        ))
      }
    </div>

    <!-- Contact CTA -->
    <div
      class="mt-6 sm:mt-8 text-center animate-slide-up px-4"
      style="animation-delay: 300ms"
    >
      <div class="bg-white rounded-lg p-4 sm:p-6 border border-gray-200">
        <h3 class="text-base sm:text-lg font-black text-gray-900 mb-2">
          Weitere Fragen?
        </h3>
        <p class="font-light text-gray-600 mb-3 sm:mb-4 text-xs sm:text-sm">
          In 30 Minuten schauen wir auf deinen Alltag und klären, ob und wo Automatisierung dir konkret Routinearbeit abnimmt.
        </p>

        <a
          href="#contact"
          class="inline-flex items-center gap-2 bg-gray-900 text-white px-4 sm:px-6 py-2 rounded-full hover:bg-gray-800 transition-colors font-medium text-xs sm:text-sm"
        >
          Termin anfragen
          <svg
            class="w-3 h-3 sm:w-4 sm:h-4"
            fill="none"
            stroke="currentColor"
            viewBox="0 0 24 24"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M17 8l4 4m0 0l-4 4m4-4H3"></path>
          </svg>
        </a>
      </div>
    </div>
  </div>
</section>

<style>
  /* Enhanced styling for details/summary */
  details[open] summary {
    border-bottom: 1px solid #e5e7eb;
    margin-bottom: 0;
  }

  details summary::-webkit-details-marker {
    display: none;
  }

  details summary::marker {
    display: none;
  }

  /* Smooth animation for opening/closing */
  details[open] > summary ~ * {
    animation: slideDown 0.3s ease-out;
  }
</style>

<!-- Schema.org structured data for FAQ -->
<script
  type="application/ld+json"
  set:html={JSON.stringify({
    "@context": "https://schema.org",
    "@type": "FAQPage",
    mainEntity: faqs.map((faq) => ({
      "@type": "Question",
      name: faq.question,
      acceptedAnswer: {
        "@type": "Answer",
        text: faq.answer,
      },
    })),
  })}
/>
