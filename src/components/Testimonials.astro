---
export interface Props {
  title?: string;
  subtitle?: string;
  testimonials?: Array<{
    quote: string;
    name: string;
    position: string;
    company: string;
    image?: string;
    results?: {
      metric: string;
      improvement: string;
    };
    featured?: boolean;
  }>;
}

const {
  title = "Was unsere Kunden sagen",
  subtitle = "Viele deutsche Mittelstandsunternehmen vertrauen bereits auf unsere KI-Automatisierungslösungen",
  testimonials = [
    {
      quote: "Die Implementierung der KI-Automatisierung hat unsere Effizienz um 45% gesteigert. Manuelle Dateneingaben gehören der Vergangenheit an, und unser Team kann sich auf strategische Aufgaben konzentrieren.",
      name: "Dr. Michael Weber",
      position: "Geschäftsführer",
      company: "Weber Maschinenbau GmbH",
      image: "/images/testimonials/dr-michael-weber.svg",
      results: {
        metric: "45%",
        improvement: "Effizienzsteigerung"
      },
      featured: true
    },
    {
      quote: "Codariq hat uns geholfen, unsere Kundenservice-Prozesse zu revolutionieren. Unser Chatbot beantwortet 80% der Anfragen automatisch und unsere Kundenzufriedenheit ist um 30% gestiegen.",
      name: "Petra Hoffmann",
      position: "Leiterin Kundenservice",
      company: "TechSolutions AG",
      image: "/images/testimonials/petra-hoffmann.svg",
      results: {
        metric: "80%",
        improvement: "Automatisierte Anfragen"
      }
    },
    {
      quote: "Die nahtlose Integration in unsere bestehenden Systeme war beeindruckend. Kein Stillstand, keine Datenverluste - nur pure Effizienz. ROI bereits nach 6 Monaten erreicht.",
      name: "Thomas Schneider",
      position: "IT-Leiter",
      company: "Schneider Logistik",
      image: "/images/testimonials/thomas-schneider.svg",
      results: {
        metric: "6 Monate",
        improvement: "ROI erreicht"
      }
    },
    {
      quote: "Als traditionelles Familienunternehmen waren wir skeptisch gegenüber KI. Codariq hat uns vom Gegenteil überzeugt - professionell, verständlich und mit messbaren Ergebnissen.",
      name: "Maria Richter",
      position: "Geschäftsführerin",
      company: "Richter & Söhne KG",
      image: "/images/testimonials/maria-richter.svg",
      results: {
        metric: "25%",
        improvement: "Kosteneinsparung"
      }
    }
  ]
} = Astro.props;
---

<section id="testimonials" class="py-10 sm:py-12 bg-white">
  <div class="max-w-8xl mx-auto px-3 sm:px-4 md:px-6 lg:px-12 xl:px-16">
    
    <!-- Section Header -->
    <div class="text-center mb-10 sm:mb-12 md:mb-16 animate-slide-up px-4">
      <h2 class="text-2xl sm:text-3xl md:text-4xl font-bold text-gray-900 mb-3 sm:mb-4">
        {title}
      </h2>
      <p class="text-base sm:text-lg md:text-xl text-gray-600 max-w-3xl mx-auto leading-relaxed">
        {subtitle}
      </p>
    </div>

    <!-- Testimonials Grid -->
    <div class="grid grid-cols-1 md:grid-cols-2 gap-3 sm:gap-4 md:gap-6 mb-6 sm:mb-8 md:mb-10 max-w-5xl mx-auto px-2 sm:px-3 md:px-4">
      {testimonials.map((testimonial, index) => (
        <div 
          class={`
            group relative animate-fade-in-up
            ${testimonial.featured ? 'lg:col-span-2' : ''}
          `}
          style={`animation-delay: ${(index + 1) * 200}ms`}
        >
          <!-- Testimonial Card -->
          <div class={`
            bg-white rounded-xl p-4 sm:p-5 shadow-sm hover:shadow-md transition-all duration-300 
            transform hover:-translate-y-1 border border-gray-100 h-full
            ${testimonial.featured ? 'bg-gradient-to-br from-gray-900 to-gray-800 text-white border-gray-700 md:col-span-2 lg:col-span-1' : 'hover:bg-gray-50'}
          `}>
            
            <!-- Quote Icon -->
            <div class="mb-3 sm:mb-4">
              <svg class={`w-6 h-6 sm:w-8 sm:h-8 ${testimonial.featured ? 'text-white/30' : 'text-gray-200'}`} fill="currentColor" viewBox="0 0 24 24">
                <path d="M14.017 21v-7.391c0-5.704 3.731-9.57 8.983-10.609l.995 2.151c-2.432.917-3.995 3.638-3.995 5.849h4v10h-9.983zm-14.017 0v-7.391c0-5.704 3.748-9.57 9-10.609l.996 2.151c-2.433.917-3.996 3.638-3.996 5.849h3.983v10h-9.983z"/>
              </svg>
            </div>

            <!-- Quote Text -->
            <blockquote class={`
              mb-4 sm:mb-5 leading-relaxed text-sm sm:text-base
              ${testimonial.featured ? 'text-white/90' : 'text-gray-700'}
            `}>
              "{testimonial.quote}"
            </blockquote>

            <!-- Author Info -->
            <div class={`
              flex items-center gap-4
              ${testimonial.featured ? 'flex-col sm:flex-row text-center sm:text-left' : ''}
            `}>
              
              <!-- Avatar -->
              <div class="flex-shrink-0">
                <div class={`
                  rounded-full overflow-hidden border-4 
                  ${testimonial.featured ? 'w-20 h-20 border-primary-200' : 'w-16 h-16 border-gray-200'}
                `}>
                  {testimonial.image ? (
                    <img 
                      src={testimonial.image} 
                      alt={`${testimonial.name}, ${testimonial.position} bei ${testimonial.company}`}
                      class="w-full h-full object-cover"
                    />
                  ) : (
                    <div class={`
                      w-full h-full flex items-center justify-center text-white font-bold
                      ${testimonial.featured ? 'bg-primary-500 text-2xl' : 'bg-gray-400 text-lg'}
                    `}>
                      {testimonial.name.split(' ').map(n => n[0]).join('')}
                    </div>
                  )}
                </div>
              </div>

              <!-- Author Details -->
              <div class="flex-1 min-w-0">
                <div class={`font-bold ${testimonial.featured ? 'text-primary-900 text-lg' : 'text-gray-900'}`}>
                  {testimonial.name}
                </div>
                <div class={`${testimonial.featured ? 'text-primary-700' : 'text-gray-600'} text-sm`}>
                  {testimonial.position}
                </div>
                <div class={`${testimonial.featured ? 'text-primary-600' : 'text-gray-500'} text-sm font-medium`}>
                  {testimonial.company}
                </div>
              </div>

              <!-- Results Badge -->
              {testimonial.results && (
                <div class={`
                  text-center p-4 rounded-xl border-2 border-dashed flex-shrink-0
                  ${testimonial.featured ? 'border-primary-300 bg-primary-100' : 'border-secondary-300 bg-secondary-50'}
                `}>
                  <div class={`
                    font-bold text-2xl
                    ${testimonial.featured ? 'text-primary-600' : 'text-secondary-600'}
                  `}>
                    {testimonial.results.metric}
                  </div>
                  <div class={`
                    text-xs font-medium
                    ${testimonial.featured ? 'text-primary-700' : 'text-secondary-700'}
                  `}>
                    {testimonial.results.improvement}
                  </div>
                </div>
              )}
            </div>

            <!-- Featured Badge -->
            {testimonial.featured && (
              <div class="absolute -top-3 -right-3 bg-primary-600 text-white text-xs px-3 py-1 rounded-full font-medium shadow-lg">
                Erfolgsgeschichte
              </div>
            )}
          </div>
        </div>
      ))}
    </div>
  </div>
</section>

