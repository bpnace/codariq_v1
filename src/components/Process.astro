---
export interface Props {
  title?: string;
  subtitle?: string;
  steps?: Array<{
    number: number;
    title: string;
    description: string;
    details: string[];
    duration: string;
    icon: string;
  }>;
}

const {
  title = "So funktioniert unsere Zusammenarbeit",
  subtitle = "Ein transparenter 4-Schritt-Prozess für Ihre erfolgreiche KI-Automatisierung",
  steps = [
    {
      number: 1,
      title: "Analyse & Beratung",
      description: "Wir analysieren Ihre aktuellen Prozesse und identifizieren das größte Automatisierungspotential.",
      details: [
        "Kostenlose Erstberatung (30 Min.)",
        "Detaillierte Prozessanalyse",
        "ROI-Kalkulation und Machbarkeitsstudie",
        "Individuelles Lösungskonzept"
      ],
      duration: "1-2 Wochen",
      icon: "analysis"
    },
    {
      number: 2,
      title: "Planung & Design",
      description: "Gemeinsam entwickeln wir das optimale Design für Ihre maßgeschneiderte KI-Lösung.",
      details: [
        "Technische Spezifikation",
        "UI/UX Design und Prototyping",
        "Integrationsstrategie",
        "Projekt-Roadmap mit Meilensteinen"
      ],
      duration: "2-3 Wochen",
      icon: "design"
    },
    {
      number: 3,
      title: "Entwicklung & Integration",
      description: "Unser Expertenteam entwickelt und integriert Ihre KI-Lösung in bestehende Systeme.",
      details: [
        "Agile Entwicklung in 2-Wochen-Sprints",
        "Kontinuierliche Tests und Qualitätssicherung",
        "Nahtlose Integration ohne Betriebsunterbrechung",
        "Ausführliche Dokumentation"
      ],
      duration: "4-12 Wochen",
      icon: "development"
    },
    {
      number: 4,
      title: "Training & Support",
      description: "Wir schulen Ihr Team und bieten dauerhaften Support für optimale Ergebnisse.",
      details: [
        "Umfassende Mitarbeiterschulungen",
        "Go-Live Support und Begleitung",
        "24/7 Monitoring und Wartung",
        "Kontinuierliche Optimierung"
      ],
      duration: "Laufend",
      icon: "support"
    }
  ]
} = Astro.props;
---

<section id="process" class="py-20 bg-primary-50 relative overflow-hidden">
  <!-- Background Pattern -->
  <div class="absolute inset-0 opacity-5">
    <div class="absolute inset-0" style="
      background-image: radial-gradient(circle at 2px 2px, #1E3A8A 1px, transparent 0);
      background-size: 32px 32px;
    "></div>
  </div>

  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative">
    
    <!-- Section Header -->
    <div class="text-center mb-16 animate-slide-up">
      <h2 class="text-3xl md:text-4xl font-serif font-bold text-gray-900 mb-4">
        {title}
      </h2>
      <p class="text-xl text-gray-600 max-w-3xl mx-auto leading-relaxed">
        {subtitle}
      </p>
    </div>

    <!-- Process Timeline -->
    <div class="relative">
      <!-- Connection Line -->
      <div class="hidden lg:block absolute top-24 left-0 w-full h-0.5 bg-gradient-to-r from-primary-200 via-primary-400 to-primary-600"></div>
      
      <!-- Steps Grid -->
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8 lg:gap-4">
        {steps.map((step, index) => (
          <div 
            class="relative group"
            style={`animation: fadeInUp 0.6s ease-out ${(index + 1) * 200}ms both`}
          >
            <!-- Step Card -->
            <div class="bg-white rounded-2xl p-8 shadow-soft hover:shadow-strong transition-all duration-500 transform hover:-translate-y-3 border border-gray-100 group-hover:border-primary-200 h-full relative">
              
              <!-- Step Number Circle -->
              <div class="absolute -top-6 left-1/2 transform -translate-x-1/2">
                <div class="w-12 h-12 bg-primary-600 text-white rounded-full flex items-center justify-center font-bold text-lg shadow-lg group-hover:bg-primary-700 transition-colors duration-300 relative z-10">
                  {step.number}
                </div>
                <!-- Pulse Animation -->
                <div class="absolute inset-0 w-12 h-12 bg-primary-600 rounded-full animate-ping opacity-20"></div>
              </div>

              <!-- Icon -->
              <div class="mb-6 mt-4 flex justify-center">
                <div class="w-16 h-16 bg-primary-100 rounded-2xl flex items-center justify-center group-hover:bg-primary-200 transition-colors duration-300">
                  {step.icon === 'analysis' && (
                    <svg class="w-8 h-8 text-primary-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"/>
                    </svg>
                  )}
                  
                  {step.icon === 'design' && (
                    <svg class="w-8 h-8 text-primary-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zM7 3H5a2 2 0 00-2 2v12a4 4 0 004 4h2a2 2 0 002-2V5a2 2 0 00-2-2H7z"/>
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 14l2-2-2-2M21 12H9"/>
                    </svg>
                  )}
                  
                  {step.icon === 'development' && (
                    <svg class="w-8 h-8 text-primary-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4"/>
                    </svg>
                  )}
                  
                  {step.icon === 'support' && (
                    <svg class="w-8 h-8 text-primary-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M18.364 5.636l-3.536 3.536m0 5.656l3.536 3.536M9.172 9.172L5.636 5.636m3.536 9.192L5.636 18.364M12 2.25a9.75 9.75 0 109.75 9.75A9.75 9.75 0 0012 2.25z"/>
                    </svg>
                  )}
                </div>
              </div>

              <!-- Content -->
              <div class="text-center mb-6">
                <h3 class="text-xl font-bold text-gray-900 mb-2 group-hover:text-primary-900 transition-colors">
                  {step.title}
                </h3>
                <p class="text-gray-600 leading-relaxed mb-4">
                  {step.description}
                </p>
                
                <!-- Duration Badge -->
                <div class="inline-flex items-center gap-2 bg-primary-100 text-primary-700 px-3 py-1 rounded-full text-sm font-medium group-hover:bg-primary-200 transition-colors">
                  <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/>
                  </svg>
                  {step.duration}
                </div>
              </div>

              <!-- Details List -->
              <div class="space-y-2">
                <h4 class="font-semibold text-gray-900 text-sm mb-3">Beinhaltet:</h4>
                {step.details.map((detail) => (
                  <div class="flex items-start gap-2 text-sm">
                    <div class="w-1.5 h-1.5 bg-secondary-500 rounded-full flex-shrink-0 mt-2"></div>
                    <span class="text-gray-600">{detail}</span>
                  </div>
                ))}
              </div>

              <!-- Decorative Arrow (Desktop) -->
              {index < steps.length - 1 && (
                <div class="hidden lg:block absolute -right-4 top-1/2 transform -translate-y-1/2 z-20">
                  <svg class="w-8 h-8 text-primary-400 group-hover:text-primary-600 transition-colors" fill="currentColor" viewBox="0 0 24 24">
                    <path d="M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"/>
                  </svg>
                </div>
              )}
            </div>
          </div>
        ))}
      </div>
    </div>

    <!-- CTA Section -->
    <div class="mt-20 text-center animate-slide-up" style="animation-delay: 800ms">
      <div class="bg-white rounded-2xl p-8 md:p-12 shadow-soft border border-gray-100">
        <div class="max-w-4xl mx-auto">
          <h3 class="text-2xl md:text-3xl font-bold text-gray-900 mb-4">
            Starten Sie noch heute Ihre KI-Transformation
          </h3>
          <p class="text-xl text-gray-600 mb-8 leading-relaxed">
            Vereinbaren Sie jetzt Ihr kostenloses Strategiegespräch und erfahren Sie, 
            wie KI-Automatisierung Ihr Unternehmen zum Marktführer macht.
          </p>
          
          <div class="flex flex-col sm:flex-row gap-4 justify-center">
            <a 
              href="#contact"
              class="inline-flex items-center gap-2 bg-primary-600 text-white px-8 py-4 rounded-lg hover:bg-primary-700 transition-colors font-medium shadow-lg hover:shadow-xl transform hover:-translate-y-1 focus:outline-none focus:ring-4 focus:ring-primary-200"
            >
              <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"/>
              </svg>
              Kostenloses Strategiegespräch
            </a>
            <a 
              href="#case-studies"
              class="inline-flex items-center gap-2 border-2 border-primary-600 text-primary-600 px-8 py-4 rounded-lg hover:bg-primary-50 transition-colors font-medium focus:outline-none focus:ring-4 focus:ring-primary-200"
            >
              <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
              </svg>
              Fallstudien ansehen
            </a>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<style>
  @keyframes fadeInUp {
    from {
      opacity: 0;
      transform: translateY(30px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  /* Pulse animation for step numbers */
  @keyframes pulse {
    0%, 100% {
      opacity: 0.2;
    }
    50% {
      opacity: 0.4;
    }
  }
</style>