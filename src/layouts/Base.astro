---
import "../styles/global.css";

export interface Props {
  title: string;
  description?: string;
  ogImage?: string;
}

const {
  title,
  description = "Wir bauen KI Agenten, die Support, Backoffice und HR entlasten – damit Sie mehr Zeit für Kunden und Entscheidungen haben",
  ogImage,
} = Astro.props;
// Normalize canonical URL: remove trailing slashes and .html extension
let pathname = Astro.url.pathname;
// Remove .html extension if present
if (pathname.endsWith(".html")) {
  pathname = pathname.slice(0, -5);
}
// Remove trailing slashes (except root)
if (pathname !== "/" && pathname.endsWith("/")) {
  pathname = pathname.slice(0, -1);
}
const canonicalURL = new URL(pathname, "https://codariq.de");
---

<!doctype html>
<html lang="de" class="scroll-smooth bg-white">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
    />
    <meta name="theme-color" content="#1E3A8A" />
    <meta name="msapplication-TileColor" content="#1E3A8A" />
    <meta name="format-detection" content="telephone=no" />
    <meta name="mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="default" />
    <meta name="apple-mobile-web-app-title" content="Codariq" />

    <!-- Performance optimizations -->
    <link
      rel="preload"
      href="/images/hero/hero2.webp"
      as="image"
      type="image/webp"
    />

    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="/favicon.ico" />
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png" />
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png" />
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
    <link
      rel="icon"
      type="image/png"
      sizes="192x192"
      href="/android-chrome-192x192.png"
    />
    <link
      rel="icon"
      type="image/png"
      sizes="512x512"
      href="/android-chrome-512x512.png"
    />
    <meta
      name="msapplication-TileImage"
      content="/android-chrome-192x192.png"
    />
    <link rel="manifest" href="/manifest.json" />
    <link rel="canonical" href={canonicalURL} />

    <!-- Primary Meta Tags -->
    <title>{title}</title>
    <meta name="title" content={title} />
    <meta name="description" content={description} />
    <meta name="author" content="Codariq" />
    <meta
      name="keywords"
      content="KI Agenten, KI Automatisierung, Prozesse automatisieren, Support entlasten, Backoffice automatisieren, HR Prozesse, Künstliche Intelligenz, Unternehmen digitalisieren, Mittelstand Deutschland, DSGVO konform, schnelle Pilotprojekte"
    />
    <meta name="robots" content="index, follow" />
    <meta name="language" content="de" />
    <meta name="revisit-after" content="7 days" />

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website" />
    <meta property="og:url" content={canonicalURL} />
    <meta property="og:title" content={title} />
    <meta property="og:description" content={description} />
    <meta
      property="og:image"
      content={ogImage
        ? ogImage.startsWith("http")
          ? ogImage
          : `https://codariq.de${ogImage}`
        : `${canonicalURL.origin}/images/hero/hero2.webp`}
    />
    <meta property="og:image:width" content="1536" />
    <meta property="og:image:height" content="1024" />
    <meta property="og:image:type" content="image/webp" />
    <meta property="og:locale" content="de_DE" />
    <meta property="og:site_name" content="Codariq" />

    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:url" content={canonicalURL} />
    <meta name="twitter:title" content={title} />
    <meta name="twitter:description" content={description} />
    <meta
      name="twitter:image"
      content={ogImage
        ? ogImage.startsWith("http")
          ? ogImage
          : `https://codariq.de${ogImage}`
        : `${canonicalURL.origin}/images/hero/hero2.webp`}
    />
    <meta
      name="twitter:image:alt"
      content="Codariq KI-Automatisierung Dashboard für deutsche Unternehmen"
    />
    <meta name="twitter:site" content="@codariq" />
    <meta name="twitter:creator" content="@codariq" />

    <!-- Additional SEO -->
    <meta name="geo.region" content="DE-BE" />
    <meta name="geo.placename" content="Berlin" />
    <meta name="geo.position" content="52.520008;13.404954" />
    <meta name="ICBM" content="52.520008, 13.404954" />

    <!-- Sitemap -->
    <link rel="sitemap" type="application/xml" href="/sitemap-index.xml" />

    <!-- Fonts -->
    <link
      rel="preload"
      href="/fonts/Satoshi-Variable.woff2"
      as="font"
      type="font/woff2"
      crossorigin
    />

    <!-- Global Styles -->
    <style>
      @font-face {
        font-family: "Satoshi";
        src: url("/fonts/Satoshi-Variable.woff2") format("woff2");
        font-weight: 300 900;
        font-style: normal;
        font-display: swap;
      }

      html {
        font-family: "Satoshi", system-ui, sans-serif;
        background-color: white;
      }

      body {
        background-color: white;
      }

      /* Enhanced focus styles for EAA compliance */
      :focus-visible {
        outline: 3px solid #1e3a8a;
        outline-offset: 2px;
        border-radius: 4px;
      }

      /* High contrast mode support */
      @media (prefers-contrast: high) {
        :focus-visible {
          outline: 4px solid;
          outline-color: Highlight;
        }
      }

      /* Consistent CTA button animations */
      .cta-button {
        transform-origin: center;
        transition:
          transform 0.2s ease,
          background-color 0.2s ease;
        will-change: transform;
        backface-visibility: hidden;
      }

      .cta-button:hover {
        transform: scale(1.02);
      }

      /* Navigation link hover effect with growing underline (desktop only) */
      .nav-link {
        position: relative;
        display: inline-block;
        transition: color 0.3s ease;
      }

      /* Underline hover effect only on desktop (md breakpoint and up) */
      @media (min-width: 768px) {
        .nav-link::after {
          content: '';
          position: absolute;
          width: 0;
          height: 2px;
          bottom: -4px;
          left: 50%;
          background-color: #ea580c; /* Orange brand color */
          transition: width 0.3s ease, left 0.3s ease;
        }

        .nav-link:hover::after {
          width: 100%;
          left: 0;
        }
      }

      /* Color transitions for navigation elements when scrolling */
      #main-nav .nav-link,
      #main-nav svg,
      #main-nav button,
      #nav-logo {
        transition: color 0.3s ease, stroke 0.3s ease;
      }

      /* Default: no header background, dark elements */
      header {
        background: transparent !important;
        backdrop-filter: none;
        -webkit-backdrop-filter: none;
        border-color: transparent !important;
        transition:
          background-color 500ms cubic-bezier(0.16, 1, 0.3, 1),
          border-color 500ms cubic-bezier(0.16, 1, 0.3, 1),
          box-shadow 500ms cubic-bezier(0.16, 1, 0.3, 1),
          backdrop-filter 500ms cubic-bezier(0.16, 1, 0.3, 1),
          -webkit-backdrop-filter 500ms cubic-bezier(0.16, 1, 0.3, 1);
        will-change: background-color, border-color, box-shadow, backdrop-filter;
      }

      #main-nav .nav-link {
        color: #374151 !important; /* text-gray-700 */
      }

      #main-nav .nav-link:hover {
        color: #111827 !important; /* text-gray-900 */
      }

      #main-nav svg,
      #main-nav button {
        color: #374151 !important; /* text-gray-700 */
        stroke: currentColor;
      }

      #main-nav button:hover {
        color: #111827 !important; /* text-gray-900 */
      }

      #nav-logo {
        color: #374151; /* text-gray-700 */
      }

      /* Dark mode for navigation when scrolled past hero */
      header.nav-scrolled #main-nav .nav-link {
        color: #374151 !important; /* text-gray-700 - dark gray */
      }

      header.nav-scrolled #main-nav svg {
        color: #374151 !important; /* text-gray-700 - dark gray */
        stroke: currentColor;
      }

      header.nav-scrolled #main-nav button {
        color: #374151 !important; /* text-gray-700 - dark gray */
      }

      /* Keep hover states working in both modes */
      header.nav-scrolled #main-nav .nav-link:hover {
        color: #4b5563 !important; /* text-gray-600 */
      }

      header.nav-scrolled #main-nav button:hover {
        color: #4b5563 !important; /* text-gray-600 */
      }

      /* Logo shows natural dark color when scrolled */
      header.nav-scrolled #nav-logo {
        color: #111827; /* text-gray-900 */
      }

      /* After scrolling past hero: blurred white header background */
      header.nav-scrolled {
        background: rgba(255, 255, 255, 0.78);
        border-color: rgba(17, 24, 39, 0.08) !important;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.08);
        backdrop-filter: blur(16px);
        -webkit-backdrop-filter: blur(16px);
      }

      /* Mobile menu button color transition */
      #mobile-menu-button {
        transition: color 0.3s ease;
      }

      /* Dark color for mobile menu button when scrolled */
      header.nav-scrolled #mobile-menu-button {
        color: #374151 !important; /* text-gray-700 */
      }

      /* Reduced motion for accessibility */
      @media (prefers-reduced-motion: reduce) {
        *,
        *::before,
        *::after {
          animation-duration: 0.01ms !important;
          animation-iteration-count: 1 !important;
          transition-duration: 0.01ms !important;
        }

        .cta-button:hover {
          transform: none !important;
        }
      }
    </style>

    <!-- Enhanced Structured Data -->
    <!-- WebSite Schema -->
    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "WebSite",
        "name": "Codariq - KI-Automatisierung für KMU",
        "alternateName": "Codariq",
        "url": "https://codariq.de",
        "description": "Professionelle KI-Automatisierungslösungen für kleine und mittelständische Unternehmen in Deutschland, Österreich und der Schweiz",
        "inLanguage": "de-DE",
        "publisher": {
          "@type": "Organization",
          "name": "Codariq"
        }
      }
    </script>

    <!-- Organization Schema -->
    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "Organization",
        "name": "Codariq",
        "alternateName": "codariq",
        "description": "Kleingewerbe für KI-Systeme im deutschen Mittelstand. Spezialisiert auf Beratung, Implementierung, Wartung und Rettung misglückter KI-Projekte in KMU.",
        "url": "https://codariq.de",
        "image": "https://codariq.de/images/hero/hero2.webp",
        "foundingDate": "2025",
        "foundingLocation": {
          "@type": "Place",
          "address": {
            "@type": "PostalAddress",
            "addressLocality": "Berlin",
            "addressCountry": "DE"
          }
        },
        "contactPoint": [
          {
            "@type": "ContactPoint",
            "contactType": "Customer Service",
            "areaServed": ["DE", "AT", "CH"],
            "availableLanguage": ["German", "English"],
            "hoursAvailable": {
              "@type": "OpeningHoursSpecification",
              "dayOfWeek": [
                "Monday",
                "Tuesday",
                "Wednesday",
                "Thursday",
                "Friday"
              ],
              "opens": "09:00",
              "closes": "18:00"
            }
          },
          {
            "@type": "ContactPoint",
            "email": "kontakt@codariq.de",
            "contactType": "Sales",
            "areaServed": ["DE", "AT", "CH"],
            "availableLanguage": ["German", "English"]
          }
        ],
        "address": {
          "@type": "PostalAddress",
          "addressLocality": "Berlin",
          "addressRegion": "Berlin",
          "addressCountry": "DE"
        },
        "sameAs": [
          "https://www.linkedin.com/company/codariq",
          "https://www.xing.com/companies/codariq"
        ],
        "knowsAbout": [
          "Künstliche Intelligenz",
          "Prozessautomatisierung",
          "Machine Learning",
          "Robotic Process Automation",
          "Business Intelligence",
          "Digitale Transformation",
          "DSGVO Compliance",
          "Kleine und mittelständische Unternehmen"
        ],
        "serviceArea": {
          "@type": "Country",
          "name": "Deutschland"
        },
        "hasOfferCatalog": {
          "@type": "OfferCatalog",
          "name": "KI-Automatisierungslösungen",
          "itemListElement": [
            {
              "@type": "Offer",
              "@id": "https://codariq.de/#ai-readiness-check",
              "itemOffered": {
                "@type": "Service",
                "name": "AI Readiness Check",
                "description": "Umfassende Analyse zur Identifikation der besten KI-Automatisierungsmöglichkeiten",
                "provider": {
                  "@type": "Organization",
                  "name": "Codariq"
                },
                "areaServed": ["DE", "AT", "CH"],
                "serviceType": "Business Process Analysis",
                "category": "Artificial Intelligence Consulting"
              },
              "price": "999",
              "priceCurrency": "EUR",
              "priceSpecification": [
                {
                  "@type": "PriceSpecification",
                  "name": "Regulärer Preis",
                  "price": "999",
                  "priceCurrency": "EUR",
                  "valueAddedTaxIncluded": true
                },
                {
                  "@type": "PriceSpecification",
                  "name": "Neukunden-Rabatt (25%)",
                  "price": "749",
                  "priceCurrency": "EUR",
                  "valueAddedTaxIncluded": true,
                  "eligibleQuantity": {
                    "@type": "QuantitativeValue",
                    "value": 1
                  },
                  "eligibleCustomerType": "New Customer"
                }
              ],
              "availability": "https://schema.org/InStock",
              "deliveryLeadTime": "P1W/P2W"
            },
            {
              "@type": "Offer",
              "@id": "https://codariq.de/#automation-pilot",
              "itemOffered": {
                "@type": "Service",
                "name": "Automation Pilot",
                "description": "Entwicklung und Implementierung einer individuellen Automatisierungslösung",
                "provider": {
                  "@type": "Organization",
                  "name": "Codariq"
                },
                "areaServed": ["DE", "AT", "CH"],
                "serviceType": "Custom AI Development",
                "category": "Artificial Intelligence Implementation"
              },
              "priceRange": "2500-9500 EUR",
              "priceCurrency": "EUR",
              "priceSpecification": [
                {
                  "@type": "PriceSpecification",
                  "name": "Regulärer Preis",
                  "minPrice": "2500",
                  "maxPrice": "9500",
                  "priceCurrency": "EUR",
                  "valueAddedTaxIncluded": true
                },
                {
                  "@type": "PriceSpecification",
                  "name": "Neukunden-Rabatt (25%)",
                  "minPrice": "1875",
                  "maxPrice": "7125",
                  "priceCurrency": "EUR",
                  "valueAddedTaxIncluded": true,
                  "eligibleQuantity": {
                    "@type": "QuantitativeValue",
                    "value": 1
                  },
                  "eligibleCustomerType": "New Customer"
                }
              ],
              "availability": "https://schema.org/InStock",
              "deliveryLeadTime": "P4W/P12W"
            },
            {
              "@type": "Offer",
              "@id": "https://codariq.de/#team-training",
              "itemOffered": {
                "@type": "Service",
                "name": "Team Training & AI Awareness",
                "description": "Der kompakte Einstieg für Unternehmen, die ihr Team fit für KI machen wollen",
                "provider": {
                  "@type": "Organization",
                  "name": "Codariq"
                },
                "areaServed": ["DE", "AT", "CH"],
                "serviceType": "Professional Training",
                "category": "Artificial Intelligence Training"
              },
              "price": "1500",
              "priceCurrency": "EUR",
              "priceSpecification": [
                {
                  "@type": "PriceSpecification",
                  "name": "Regulärer Preis",
                  "price": "1500",
                  "priceCurrency": "EUR",
                  "valueAddedTaxIncluded": true
                },
                {
                  "@type": "PriceSpecification",
                  "name": "Neukunden-Rabatt (25%)",
                  "price": "1125",
                  "priceCurrency": "EUR",
                  "valueAddedTaxIncluded": true,
                  "eligibleQuantity": {
                    "@type": "QuantitativeValue",
                    "value": 1
                  },
                  "eligibleCustomerType": "New Customer"
                }
              ],
              "availability": "https://schema.org/InStock",
              "deliveryLeadTime": "P1D/P3D"
            },
            {
              "@type": "Offer",
              "@id": "https://codariq.de/#strategische-beratung",
              "itemOffered": {
                "@type": "Service",
                "name": "Strategische Beratung",
                "description": "Kontinuierliche strategische Beratung und Optimierung der KI-Automatisierungsstrategie",
                "provider": {
                  "@type": "Organization",
                  "name": "Codariq"
                },
                "areaServed": ["DE", "AT", "CH"],
                "serviceType": "Strategic AI Consulting",
                "category": "Artificial Intelligence Consulting"
              },
              "priceRange": "499-1500 EUR",
              "priceCurrency": "EUR",
              "availability": "https://schema.org/InStock",
              "billingIncrement": "P1M",
              "recurringCharge": true
            }
          ]
        }
      }
    </script>

    <!-- Special Announcement Schema -->
    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "SpecialAnnouncement",
        "name": "Kostenlose KI-Automatisierung Strategieberatung",
        "text": "Erhalten Sie eine kostenlose 45-minütige Strategieberatung zur Identifikation Ihrer besten KI-Automatisierungsmöglichkeiten. Unverbindlich und ohne Risiko.",
        "category": "https://www.wikidata.org/wiki/Q186386",
        "datePosted": "2024-12-28",
        "expires": "2025-12-31",
        "spatialCoverage": {
          "@type": "Country",
          "name": "Deutschland"
        },
        "announcementLocation": {
          "@type": "VirtualLocation",
          "url": "https://codariq.de"
        },
        "publisher": {
          "@type": "Organization",
          "name": "Codariq",
          "url": "https://codariq.de"
        }
      }
    </script>

    <!-- Local Business Schema -->
    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "ProfessionalService",
        "name": "Codariq - KI-Automatisierung",
        "image": "https://codariq.de/images/hero/hero2.webp",
        "@id": "https://codariq.de",
        "url": "https://codariq.de",
        "address": {
          "@type": "PostalAddress",
          "addressLocality": "Berlin",
          "addressRegion": "Berlin",
          "postalCode": "10713",
          "addressCountry": "DE"
        },
        "openingHoursSpecification": {
          "@type": "OpeningHoursSpecification",
          "dayOfWeek": ["Monday", "Tuesday", "Wednesday", "Thursday", "Friday"],
          "opens": "09:00",
          "closes": "18:00"
        },
        "priceRange": "€€€",
        "serviceType": "Business Automation and AI Services"
      }
    </script>

    <!-- Cookiebot Consent Management -->
    <script
      id="Cookiebot"
      src="https://consent.cookiebot.com/uc.js"
      data-cbid="c47e2f75-b87b-42f0-9ef4-383dd0ba2d09"
      data-blockingmode="auto"
      type="text/javascript"
    ></script>

    <!-- Analytics (loaded after consent) -->
    <script
      type="text/plain"
      data-cookieconsent="statistics"
      defer
      data-domain="codariq.de"
      src="https://plausible.io/js/script.js"
    ></script>
  </head>

  <body
    class="bg-white text-gray-900 antialiased overscroll-behavior-y-contain"
  >
    <!-- Skip Links for accessibility -->
    <a
      href="#main-content"
      class="sr-only focus:not-sr-only focus:absolute focus:top-0 focus:left-0 bg-blue-600 text-white p-3 z-50 focus:z-50 rounded"
    >
      Zum Hauptinhalt springen
    </a>

    <div class="min-h-screen flex flex-col">
      <header
        class="fixed top-0 left-0 right-0 z-50 transition-all duration-500 ease-out"
        style="position: fixed !important; transform: translateY(0) !important;"
      >
        <!-- Header content will be added here -->
        <nav
          class="max-w-8xl mx-auto px-3 sm:px-4 md:px-6 lg:px-8 xl:px-16 h-14 sm:h-16 flex items-center justify-between sm:grid sm:grid-cols-3 relative"
          id="main-nav"
        >
          <!-- Left: Logo -->
          <div class="flex items-center justify-start">
            <a href="/" class="hover:opacity-90 transition-all duration-300">
              <span
                id="nav-logo"
                class="brand-logo text-xl sm:text-2xl leading-none"
                aria-label="Codariq"
              >
                codariq
              </span>
            </a>
          </div>

          <!-- Center: Desktop Navigation -->
          <div
            class="hidden sm:flex items-center justify-center space-x-4 md:space-x-8"
            id="nav-links"
          >
            <a
              href="/#process"
              class="nav-link transition-colors font-medium text-sm md:text-base"
              >Prozess</a
            >
            <a
              href="/#benefits"
              class="nav-link transition-colors font-medium text-sm md:text-base"
              >Preise</a
            >
            <a
              href="/#testimonials"
              class="nav-link transition-colors font-medium text-sm md:text-base"
              >Referenzen</a
            >
            <a
              href="/faq"
              class="nav-link transition-colors font-medium text-sm md:text-base"
              >FAQ</a
            >
            <a
              href="/#insights"
              class="nav-link transition-colors font-medium text-sm md:text-base"
              >Blog</a
            >
          </div>

          <!-- Mobile: Centered Burger Menu -->
          <div class="absolute left-1/2 -translate-x-1/2 sm:hidden">
            <button
              id="mobile-menu-button"
              class="p-2 text-gray-700 hover:text-gray-900 focus:outline-none focus:ring-2 focus:ring-orange-500 rounded-lg"
              aria-label="Menu öffnen"
              aria-expanded="false"
            >
              <svg
                class="w-6 h-6"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M4 6h16M4 12h16M4 18h16"></path>
              </svg>
            </button>
          </div>

          <!-- Right: CTA Button -->
          <div class="flex items-center justify-end">
            <a
              href="/#final-cta"
              class="bg-gradient-to-br from-orange-500 to-orange-700 text-white px-3 sm:px-4 md:px-6 py-2 rounded-full hover:from-orange-600 hover:to-orange-800 transition-all duration-200 font-bold text-xs sm:text-sm md:text-base shadow-lg cta-button"
              aria-label="Strategiegespräch vereinbaren"
            >
              <span class="hidden sm:inline">Termin buchen</span>
              <span class="sm:hidden">Kontakt</span>
            </a>
          </div>
        </nav>

        <!-- Mobile Menu -->
        <div
          id="mobile-menu"
          class="sm:hidden hidden bg-white/95 backdrop-blur-lg border-b border-white/30"
        >
          <div class="px-4 py-3 space-y-3">
            <a
              href="/#process"
              class="block text-gray-800 hover:text-gray-600 transition-colors font-medium py-2"
              >Prozess</a
            >
            <a
              href="/#benefits"
              class="block text-gray-800 hover:text-gray-600 transition-colors font-medium py-2"
              >Preise</a
            >
            <a
              href="/#testimonials"
              class="block text-gray-800 hover:text-gray-600 transition-colors font-medium py-2"
              >Referenzen</a
            >
            <a
              href="/faq"
              class="block text-gray-800 hover:text-gray-600 transition-colors font-medium py-2"
              >FAQ</a
            >
            <a
              href="/#insights"
              class="block text-gray-800 hover:text-gray-600 transition-colors font-medium py-2"
              >Blog</a
            >
          </div>
        </div>
      </header>

      <main class="flex-1" id="main-content" role="main">
        <slot />
      </main>

      <footer class="bg-gray-800 border-t border-gray-700" role="contentinfo">
        <div
          class="max-w-8xl mx-auto px-3 sm:px-4 md:px-6 lg:px-8 xl:px-16 py-8 sm:py-10 md:py-12"
        >
          <div
            class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8 md:gap-6 lg:gap-8"
          >
            <!-- Column 1: Logo + Beschreibung -->
            <div class="text-left">
              <div class="mb-6">
                <div class="brand-logo text-white text-3xl md:text-4xl leading-none mb-4">
                  codariq
                </div>
                <p
                  class="text-gray-300 text-sm leading-relaxed max-w-sm md:mx-0"
                >
                  Wir automatisieren Ihr Business individuell und datensicher, 
                  damit Sie wieder Luft zum wachsen haben.
                  Ordner
                  Intelligente Automatisierungen, die dir echte Arbeit abnehmen.
                  Ordner
                  Intelligente Automatisierungen für Selbstständige und kleine Teams, damit Routinearbeit verschwindet und du wertvolle Zeit zurückgewinnst.
                </p>
              </div>
            </div>

            <!-- Column 2: Trust Badges + Industry Leaders -->
            <div class="text-left">
              <div class="mb-6">
                <h4 class="font-semibold text-gray-100 mb-3 text-sm">
                  Zertifizierungen
                </h4>
                <div
                  class="flex flex-wrap justify-start gap-2 md:gap-3 mb-4"
                >
                  <img
                    src="/images/badges/climate-friendly.webp"
                    alt="Klimafreundlich"
                    class="h-10 md:h-12 w-auto"
                    loading="lazy"
                    decoding="async"
                  />
                  <img
                    src="/images/badges/gdpr-ready.webp"
                    alt="DSGVO konform"
                    class="h-10 md:h-12 w-auto"
                    loading="lazy"
                    decoding="async"
                  />
                  <img
                    src="/images/badges/remote-only.webp"
                    alt="Remote verfügbar"
                    class="h-10 md:h-12 w-auto"
                    loading="lazy"
                    decoding="async"
                  />
                </div>
              </div>

              <div>
                <span class="text-gray-400 text-xs mb-2 block"
                  >Zertifiziert durch:</span
                >
                <div
                  class="flex items-center justify-start space-x-2 md:space-x-3"
                >
                  <a
                    href="https://www.coursera.org/account/accomplishments/specialization/certificate/02X85MNGYZGE"
                    target="_blank"
                    rel="noopener noreferrer"
                    class="hover:scale-105 transition-all duration-200"
                    aria-label="View Google certification on Coursera"
                  >
                    <img
                      src="/images/logos/google.svg"
                      alt="Google"
                      class="h-6 md:h-8 w-auto brightness-0 invert opacity-80 hover:opacity-100 transition-opacity"
                      loading="lazy"
                      decoding="async"
                    />
                  </a>
                  <a
                    href="https://www.credly.com/badges/bc236bf7-2cb8-4435-bbea-660a4c37329e/public_url"
                    target="_blank"
                    rel="noopener noreferrer"
                    class="hover:scale-105 transition-all duration-200"
                    aria-label="View IBM certification on Credly"
                  >
                    <img
                      src="/images/logos/ibm.svg"
                      alt="IBM"
                      class="h-8 md:h-10 w-auto brightness-0 invert opacity-80 hover:opacity-100 transition-opacity"
                      loading="lazy"
                      decoding="async"
                    />
                  </a>
                  <a
                    href="https://learn.deeplearning.ai/accomplishments/4c4f4d61-8e90-4756-b0a3-1b32b7111c97?usp=sharing"
                    target="_blank"
                    rel="noopener noreferrer"
                    class="hover:scale-105 transition-all duration-200"
                    aria-label="View DeepLearning.AI accomplishments"
                  >
                    <img
                      src="/images/logos/openai.svg"
                      alt="OpenAI"
                      class="h-6 md:h-8 w-auto brightness-0 invert opacity-80 hover:opacity-100 transition-opacity"
                      loading="lazy"
                      decoding="async"
                    />
                  </a>
                </div>
              </div>
            </div>

            <!-- Column 3: Unternehmen -->
            <div class="text-left">
              <h3 class="font-semibold text-gray-100 mb-4">Unternehmen</h3>
              <ul class="space-y-2 text-gray-300 mb-6">
                <li>
                  <a
                    href="/impressum"
                    class="hover:text-orange-400 transition-colors">Impressum</a
                  >
                </li>
                <li>
                  <a
                    href="/datenschutz"
                    class="hover:text-orange-400 transition-colors"
                    >Datenschutzerklärung</a
                  >
                </li>
                <li>
                  <a
                    href="/cookie-richtlinien"
                    class="hover:text-orange-400 transition-colors"
                    >Cookie-Richtlinien</a
                  >
                </li>
                <li>
                  <a href="/faq" class="hover:text-orange-400 transition-colors"
                    >FAQ</a
                  >
                </li>
                <li>
                  <a href="/agb" class="hover:text-orange-400 transition-colors"
                    >AGB</a
                  >
                </li>
              </ul>
            </div>

            <!-- Column 4: Kontakt + Newsletter -->
            <div class="text-left">
              <!-- Kontakt Section -->
              <div class="mb-6">
                <h3 class="font-semibold text-gray-100 mb-3">Kontakt</h3>
                <ul class="space-y-2 text-gray-300 text-sm">
                  <li>kontakt@codariq.de</li>
                  <li>Made with love in Berlin ❤️</li>
                </ul>
              </div>

              <!-- Newsletter Section -->
              <div>
                <h4 class="font-semibold text-gray-100 mb-2">Newsletter</h4>
                <p class="text-gray-400 text-xs mb-3">KI-News & Insights</p>

                <!-- Newsletter Success Message -->
                <div
                  id="newsletter-success"
                  role="alert"
                  aria-live="polite"
                  class="hidden mb-3 p-2 bg-green-900/20 border border-green-600 rounded-lg"
                >
                  <div class="flex items-center">
                    <svg
                      class="w-3 h-3 text-green-400 mr-2"
                      fill="currentColor"
                      viewBox="0 0 20 20"
                    >
                      <path
                        fill-rule="evenodd"
                        d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z"
                        clip-rule="evenodd"></path>
                    </svg>
                    <div>
                      <p class="font-medium text-green-300 text-xs">
                        Erfolgreich angemeldet!
                      </p>
                      <p class="text-green-400 text-xs">
                        Bestätigungs-E-Mail folgt!
                      </p>
                    </div>
                  </div>
                </div>

                <!-- Newsletter Error Messages -->
                <div
                  id="newsletter-errors"
                  role="alert"
                  aria-live="polite"
                  class="hidden mb-3 p-2 bg-red-900/20 border border-red-600 rounded-lg"
                >
                  <p class="font-medium text-red-300 text-xs mb-1">
                    Bitte korrigieren:
                  </p>
                  <ul
                    id="newsletter-error-list"
                    class="list-disc list-inside text-red-400 text-xs"
                  >
                  </ul>
                </div>

                <!-- Newsletter Form (Compact Horizontal Layout) -->
                <form id="newsletter-form" class="flex gap-2">
                  <div class="flex-1">
                    <label for="footer-newsletter-email" class="sr-only"
                      >E-Mail-Adresse</label
                    >
                    <input
                      type="email"
                      id="footer-newsletter-email"
                      name="email"
                      required
                      autocomplete="email"
                      placeholder="ihre@email.de"
                      aria-describedby="footer-newsletter-email-error"
                      class="w-full px-3 py-2 border border-gray-600 bg-gray-700 text-white rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all text-sm placeholder-gray-400"
                    />
                    <div
                      id="footer-newsletter-email-error"
                      role="alert"
                      aria-live="polite"
                      class="text-sm text-red-400 mt-1 hidden"
                    >
                    </div>
                  </div>

                  <button
                    type="submit"
                    class="bg-gradient-to-br from-orange-500 to-orange-700 text-white px-4 py-2 rounded-lg hover:from-orange-600 hover:to-orange-800 font-medium text-sm transition-all duration-200 shadow-md cta-button whitespace-nowrap"
                  >
                    Abonnieren
                  </button>
                </form>

                <p class="text-xs text-gray-400 mt-2">
                  Kostenlos und jederzeit kündbar.
                  <a href="/datenschutz" class="underline hover:text-orange-400"
                    >Datenschutz</a
                  >
                </p>
              </div>
            </div>
          </div>
          <div
            class="border-t border-gray-600 mt-6 pt-6 text-center text-gray-400"
          >
            <p>&copy; 2025 Codariq. Alle Rechte vorbehalten.</p>
          </div>
        </div>
      </footer>

      <!-- Mobile Menu and Smooth Scrolling JavaScript -->
      <script>
        document.addEventListener("DOMContentLoaded", function () {
          // Newsletter form elements (footer)
          const footerNewsletterForm =
            document.getElementById("newsletter-form");
          const footerNewsletterErrors =
            document.getElementById("newsletter-errors");
          const footerNewsletterErrorList = document.getElementById(
            "newsletter-error-list",
          );
          const footerNewsletterSuccess =
            document.getElementById("newsletter-success");

          // Check for newsletter success parameter in URL
          const urlParams = new URLSearchParams(window.location.search);
          if (urlParams.get("newsletter") === "success") {
            if (footerNewsletterSuccess && footerNewsletterForm) {
              footerNewsletterSuccess.classList.remove("hidden");
              footerNewsletterForm.style.display = "none";

              // Clean URL to remove newsletter parameter
              window.history.replaceState(
                {},
                document.title,
                window.location.pathname,
              );
            }
          }

          // Footer Newsletter form submission with webhook
          if (
            footerNewsletterForm &&
            footerNewsletterErrors &&
            footerNewsletterErrorList
          ) {
            footerNewsletterForm.addEventListener("submit", async function (e) {
              e.preventDefault();

              // Reset error states
              if (footerNewsletterErrors)
                footerNewsletterErrors.classList.add("hidden");
              if (footerNewsletterErrorList)
                footerNewsletterErrorList.innerHTML = "";

              // Get email field
              const email = document.getElementById(
                "footer-newsletter-email",
              ) as HTMLInputElement;
              const submitButton = footerNewsletterForm.querySelector(
                'button[type="submit"]',
              ) as HTMLButtonElement;

              let hasErrors = false;
              const errors: string[] = [];

              // Validate email
              const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
              if (
                !email?.value?.trim() ||
                !emailRegex.test(email.value.trim())
              ) {
                errors.push("Bitte geben Sie eine gültige E-Mail-Adresse ein");
                const errorElement = document.getElementById(
                  "footer-newsletter-email-error",
                );
                if (errorElement) {
                  errorElement.textContent =
                    "Bitte geben Sie eine gültige E-Mail-Adresse ein";
                  errorElement.classList.remove("hidden");
                }
                hasErrors = true;
              } else {
                const errorElement = document.getElementById(
                  "footer-newsletter-email-error",
                );
                if (errorElement) errorElement.classList.add("hidden");
              }

              // If there are errors, show error messages
              if (hasErrors) {
                if (footerNewsletterErrors)
                  footerNewsletterErrors.classList.remove("hidden");
                errors.forEach((error) => {
                  const li = document.createElement("li");
                  li.textContent = error;
                  if (footerNewsletterErrorList)
                    footerNewsletterErrorList.appendChild(li);
                });
                return;
              }

              // Set loading state
              if (submitButton) {
                submitButton.disabled = true;
                submitButton.textContent = "Wird gesendet...";
              }

              try {
                // Send to webhook
                const response = await fetch(
                  "https://automation.codariq.de/webhook/9f2483b5-7d05-432c-be3b-95e578dae228",
                  {
                    method: "POST",
                    headers: {
                      "Content-Type": "application/json",
                      Authorization:
                        "Basic " + btoa("admin:razxoc-kYzxow-jejbu9"),
                    },
                    body: JSON.stringify({
                      email: email.value.trim(),
                      source: "footer_newsletter",
                      timestamp: new Date().toISOString(),
                      userAgent: navigator.userAgent,
                    }),
                  },
                );

                if (response.ok) {
                  // Show success message
                  if (footerNewsletterSuccess) {
                    footerNewsletterSuccess.classList.remove("hidden");
                    footerNewsletterForm.style.display = "none";
                  }
                } else {
                  throw new Error("Newsletter-Anmeldung fehlgeschlagen");
                }
              } catch (error) {
                console.error("Newsletter subscription error:", error);
                if (footerNewsletterErrors) {
                  footerNewsletterErrors.classList.remove("hidden");
                  const li = document.createElement("li");
                  li.textContent =
                    "Ein Fehler ist aufgetreten. Bitte versuchen Sie es später erneut.";
                  if (footerNewsletterErrorList)
                    footerNewsletterErrorList.appendChild(li);
                }
              } finally {
                // Reset loading state
                if (submitButton) {
                  submitButton.disabled = false;
                  submitButton.textContent = "Abonnieren";
                }
              }
            });
          }

          // Mobile Menu Logic
          const mobileMenuButton =
            document.getElementById("mobile-menu-button");
          const mobileMenu = document.getElementById("mobile-menu");

          if (mobileMenuButton && mobileMenu) {
            mobileMenuButton.addEventListener("click", function () {
              const isExpanded =
                mobileMenuButton.getAttribute("aria-expanded") === "true";

              if (isExpanded) {
                mobileMenu.classList.add("hidden");
                mobileMenuButton.setAttribute("aria-expanded", "false");
                mobileMenuButton.innerHTML =
                  '<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>';
              } else {
                mobileMenu.classList.remove("hidden");
                mobileMenuButton.setAttribute("aria-expanded", "true");
                mobileMenuButton.innerHTML =
                  '<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>';
              }
            });

            // Close mobile menu when clicking on a link
            const mobileLinks = mobileMenu.querySelectorAll("a");
            mobileLinks.forEach((link) => {
              link.addEventListener("click", function () {
                mobileMenu.classList.add("hidden");
                mobileMenuButton.setAttribute("aria-expanded", "false");
                mobileMenuButton.innerHTML =
                  '<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>';
              });
            });
          }

          // Enhanced Smooth Scrolling for Internal Links
          const allLinks = document.querySelectorAll(
            'a[href^="#"], a[href^="/#"]',
          );
          allLinks.forEach((link) => {
            link.addEventListener(
              "click",
              function (this: HTMLAnchorElement, e) {
                const href = this.getAttribute("href");
                if (!href) return;

                const targetId = href.startsWith("/#")
                  ? href.substring(2)
                  : href.substring(1);
                const targetElement = document.getElementById(targetId);

                if (targetElement) {
                  e.preventDefault();

                  // Close mobile menu if open
                  if (mobileMenu && !mobileMenu.classList.contains("hidden")) {
                    mobileMenu.classList.add("hidden");
                    if (mobileMenuButton) {
                      mobileMenuButton.setAttribute("aria-expanded", "false");
                      mobileMenuButton.innerHTML =
                        '<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>';
                    }
                  }

                  // Smooth scroll with offset for fixed header
                  const headerHeight =
                    document.getElementById("main-nav")?.getBoundingClientRect()
                      .height || 64;
                  const headerOffset = headerHeight + 20; // Account for fixed header + some padding
                  const elementPosition =
                    targetElement.getBoundingClientRect().top;
                  const offsetPosition =
                    elementPosition + window.pageYOffset - headerOffset;

                  window.scrollTo({
                    top: offsetPosition,
                    behavior: "smooth",
                  });

                  // Update URL without causing a jump
                  window.history.pushState({}, "", href);
                }
              },
            );
          });

          // Intersection Observer for scroll animations
          if ("IntersectionObserver" in window) {
            const observerOptions = {
              threshold: 0.1,
              rootMargin: "0px 0px -50px 0px",
            };

            const observer = new IntersectionObserver((entries) => {
              entries.forEach((entry) => {
                if (entry.isIntersecting) {
                  entry.target.classList.add("is-visible");
                  observer.unobserve(entry.target); // Only animate once
                }
              });
            }, observerOptions);

            // Observe all elements with animate-on-scroll class
            document.querySelectorAll(".animate-on-scroll").forEach((el) => {
              observer.observe(el);
            });
          } else {
            // Fallback for browsers without IntersectionObserver
            document.querySelectorAll(".animate-on-scroll").forEach((el) => {
              el.classList.add("is-visible");
            });
          }

          // Navigation color change on scroll past hero section or article header
          const header = document.querySelector("header");
          const heroSection = document.querySelector("#hero");
          const footer = document.querySelector("footer");
          const articleHeader = document.querySelector(".article-header"); // Blog article header

          // Use whichever section exists (hero for homepage, article-header for blog)
          const targetSection = heroSection || articleHeader;

          if (header && targetSection) {
            let ticking = false;

            function updateNavColor() {
              const sectionBottom = targetSection.getBoundingClientRect().bottom;

              // Check if we're in the footer area
              let inFooter = false;
              if (footer) {
                const footerTop = footer.getBoundingClientRect().top;
                const headerHeight = header.offsetHeight;
                // If footer is touching or overlapping with header
                inFooter = footerTop <= headerHeight;
              }

              // Toggle class based on whether we've scrolled past the section AND not in footer
              if (sectionBottom <= 0 && !inFooter) {
                header.classList.add("nav-scrolled");
              } else {
                header.classList.remove("nav-scrolled");
              }

              ticking = false;
            }

            // Use requestAnimationFrame for smooth performance
            function onScroll() {
              if (!ticking) {
                window.requestAnimationFrame(updateNavColor);
                ticking = true;
              }
            }

            // Initial check
            updateNavColor();

            // Listen to scroll events
            window.addEventListener("scroll", onScroll, { passive: true });
            // Also listen to resize events to update on window size changes
            window.addEventListener("resize", updateNavColor);
          }
        });
      </script>
    </div>
  </body>
</html>
